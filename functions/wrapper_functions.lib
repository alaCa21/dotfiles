#!/usr/bin/zsh
# =================================================
#          CREATED: Dom 19/Jan/2014 hs 07:53
#      LAST CHANGE: 2014 Jan 19 08:59:05
# THIS SCRIPT AIMS: describe here
#           AUTHOR: Sérgio Luiz Araújo Silva
#             SITE: http://vivaotux.blogspot.com
#          TWITTER: @voyeg3r
#            SKYPE: sergioaraujosilva
# =================================================

# ref: http://www.cyberciti.biz/tips/unix-linux-bash-shell-script-wrapper-examples.html

_getdomainnameonly(){
    local h="$1"
    local f="${h:l}"
    # remove protocol part of hostname
        f="${f#http://}"
        f="${f#https://}"
    f="${f#ftp://}"
    f="${f#scp://}"
    f="${f#scp://}"
    f="${f#sftp://}"
    # remove username and/or username:password part of hostname
    f="${f#*:*@}"
    f="${f#*@}"
    # remove all /foo/xyz.html*
    f=${f%%/*}
    # show domain name only
    echo "$f"
}


ping(){
  local t="$1"
  local _ping="/bin/ping"
  local c=$(_getdomainnameonly "$t")
  [ "$t" != "$c" ] && echo "Sending ICMP ECHO_REQUEST to \"$c\"..."
  $_ping -n -c 4 -i 0.2 -W1 $c
}

host(){
  local t="$1"
  local _host="/usr/bin/host"
  local c=$(_getdomainnameonly "$t")
  [ "$t" != "$c" ] && echo "Performing DNS lookups for \"$c\"..."
  $_host $c
}
