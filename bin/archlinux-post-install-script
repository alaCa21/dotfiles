#!/usr/bin/env bash
# =================================================
#          CREATED: Dom 29/Dez/2013 hs 07:08
#      LAST CHANGE: 2014 Mar 08 19:38:20
# THIS SCRIPT AIMS: arch linux post install script
#           AUTHOR: Sérgio Luiz Araújo Silva
#             SITE: http://vivaotux.blogspot.com
#          TWITTER: @voyeg3r
#            SKYPE: sergioaraujosilva
# =================================================

# Reference: https://gist.github.com/Xifax/1517721

# testa se está logado como root
#if [ "$(id -u)" != "0" ]; then
#	echo "  Need be root"
#	sleep 2
#	exit  1
#fi

# how enable transparency in gnome-terminal
#https://xyzhou.com/blogs/easy-transparent-terminal-solution-install-devilspie2-with-gnome3-on-arch-linux

# userstyles to google
# http://userstyles.org/styles/81403/gt-deepdark-for-google

# mailpile
# https://aur.archlinux.org/packages/mailpile-git/?setlang=pt_BR

# xkill: https://www.archlinux.org/packages/extra/i686/xorg-xkill/

# better font rendering
# https://aur.archlinux.org/packages/fontconfig-infinality/

# chenge workspace easyly on gnome shell
# https://extensions.gnome.org/extension/701/top-panel-workspace-scroll/

# stopping bluetooth service
sudo systemctl stop bluetooth

# Atualizar o sistema
sudo pacman -Syu
sudo pacman -S base-devel

cowerinstall () {
		# another package manager "cower"
		# https://aur.archlinux.org/packages/co/cower/cower.tar.gz
		wget -c https://aur.archlinux.org/packages/co/cower/cower.tar.gz
		tar zxvf cower.tar.gz && cd cower
		makepkg -si
} && cowerinstall

# Documentação python
pacman -Syu pydoc


# pesquisar por pacotes: pacman -Ss <nome>

# how install lsb_release
# wget -c https://www.archlinux.org/packages/community/any/lsb-release/download/ && pacman -U $_

# how install yaourt
# https://aur.archlinux.org/packages/yaourt/

# another good package mananger is pacaur

# using aur.sh
# source: http://aur.sh/
#
# install aur package
# bash <(curl aur.sh) -si [package ...]
#
# updating aur packages
# sudo pacman -Qqm | xargs bash <(curl aur.sh) -si --needed

# read about dnsmasq
# https://wiki.archlinux.org/index.php/Dnsmasq

# wallpaper changer
# https://aur.archlinux.org/packages/variety/

installpacaur(){
		wget -c https://aur.archlinux.org/packages/pa/pacaur/pacaur.tar.gz
		[ -d ~/build ] && cd ~/build
		tar zxvf pacaur.tar.gz && cd pacaur
		makepkg -si
} && installpacaur

installpm () {
		# pm - little package mananger
		# https://aur.archlinux.org/packages.php?ID=62711
		# dependences: pacaur
		[ -d ~/build ] && cd ~/build
		wget -c  https://aur.archlinux.org/packages/pm/pm/pm.tar.gz
		tar zxvf pm.tar.gz && cd pm
		makepkg -si
} && installpm

pm i aur/firefox-nightly

pm i community/html2text

# music player
pm i aur/lollypop

# change wallpaper
pm i community/variety

# mega file storage
pm i megasync
pm i aur/nautilus-megasync

# skype alternative
pm i aur/tox-git

# software manangement
pm i community/gnome-packagekit

# limitar velocidade do pacman
# http://www.taringa.net/posts/linux/15314299/Limitar-velocidad-de-Pacman-en-ArchLinux.html
pm i trickle
# sudo trickle -d 50 pacman -Syuw --noconfirm

# cmd line image viwever
pm i extra/feh

# subtitles searcher and downloader
pm i periscope nautilus-periscope

installxfceterminal(){
		#light terminal with transparency support
		pm i extra/xfce4-terminal
		sed -i.backup '/MiscMenubarDefault/s/TRUE$/FALSE/g' ~/.config/xfce4/terminal/terminalrc
} && installxfceterminal


# how configure nautilus-open-terminal with xfce4-terminal
# http://askubuntu.com/questions/76712/setting-nautilus-open-terminal-to-launch-terminator-rather-than-gnome-terminal

# better performance
pm i aur/zramswap

# media server similar to xbmpc
pm i plexmediaserver
#It may be necessary to run through the Plex basic setup wizard before launching Plex via its systemd unit:
# /opt/plexmediaserver/start_pms
#Once completed, you can start Plex at boot with systemd:
# systemctl enable plexmediaserver
#To start Plex (after the basic setup):
# systemctl start plexmediaserver
#To begin configuring Plex, browse to http://localhost:32400/manage.

# a beautiful player
pm i aur/spotify


# firefox and chrome profile cleaner
pm i profile-cleaner

# alternative to firefox
pm i icecat

installpopcorntime(){
wget -c https://aur.archlinux.org/packages/po/popcorntime-bin/popcorntime-bin.tar.gz
tar zxvf popcorntime-bin.tar.gz && cd popcorntime-bin
makepkg -si
} && installpopcorntime

# anki
pm i aur/anki-git mplayer aur/python-pyaudio lame sox aur/audio-recorder

# watch movies throug torrents
pm i aur/popcorntime-git

# kernel optimization to desktop
pm i ulatencyd

# program needed to kill bluetooth
# https://wiki.archlinux.org/index.php/Power_saving
pm i rfkill

#
# edit --> /etc/udev/rules.d/bt.rules
#
#   ## DISABLE BLUETOOTH
#   SUBSYSTEM=="rfkill", ATTR{type}=="bluetooth", ATTR{state}="0"

# \LaTeX\
pm i texlive-core texlive-langcjk texlive-latexextra texlive-pictures
haskell-pandoc

pm i community/txt2tags

# to install haskell-pandoc you must add this repo
#[haskell-core]
#Server = http://xsounds.org/~haskell/core/$arch

admintools () {
		pm i gparted nmap arp-scan unetbootin polkit-gnome curl rsync \
				git gksu gksudo lsof openssh dnsmasq python-setuptools gvim terminator aria2 zsh aur/detox
		# davfs2 in order to access webdav services
		# dav://webdav.4shared.com
		pacman -U https://www.archlinux.org/packages/extra/i686/davfs2/download/
} && admintools

# making zsh my default shell
sudo chsh -s $(which zsh) $(whoami)
echo "export $(export | grep '^PATH=')" > ~/.zshenv

gdiskdump () {
		wget -c https://aur.archlinux.org/packages/gd/gdiskdump/gdiskdump.tar.gz
		tar zxvf gdiskdump.tar.gz && cd gdiskdump
		makepkg -si
} && gdiskdump

configzsh () {
		# video explanation: http://www.youtube.com/watch?v=1S3MUVIAieE
		# https://github.com/robbyrussell/oh-my-zsh
		# after install you need to do new login
		# themes here: https://github.com/robbyrussell/oh-my-zsh/wiki/themes
		pacman -Syu zsh zsh-lovers git
		yaourt -S zsh-completions
		git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
		cp ~/.zshrc ~/.zshrc.orig
		cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
		sudo chsh -s $(which zsh) $(whoami)
} && configzsh

configyaourt(){
		cat <<-EOF > ~/.yaourtrc
		# Yaourt Configuration File
		# Sun Jan  2 21:04:01 IST 2011

		# If set to 1, always use the default choice without confirmation.
		NOCONFIRM=1

		#If set to 0, don’t propose to edit files (from AUR or from ABS).
		EDITFILES=0

		#If 0, disable colors
		USECOLOR=1
		EOF
} && configyaourt


basesystem () {
		sudo pacman -Syu dbus acpi acpid
} && basesystem

compactadores () {
		sudo pacman -Sy zip unzip unrar p7zip
} && compactadores

# adding pandoc
# https://bbs.archlinux.org/viewtopic.php?id=127998
pacman -Sy cabal-install
cabal update
pm i ghc
cabal install pandoc

graphictools () {
		sudo pacman -Syu inkscape gimp imagemagick xclip
		sudo yaourt -S --noconfirm gloobus-sushi-bzr
		sudo yaourt -S --noconfirm cairo-ubuntu fontconfig-ubuntu freetype2-ubuntu
		sudo yaourt --noconfirm -S ttf-source-code-pro
} && graphictools

googletalkplugin () {
		# https://aur.archlinux.org/packages/google-talkplugin/
		wget -c https://aur.archlinux.org/packages/go/google-talkplugin/google-talkplugin.tar.gz
		tar zxvf google-talkplugin.tar.gz && cd google-talkplugin
		makepkg -si
} && googletalkplugin

multimedia () {
		# corebird is a twitter client
		# simplescreenrecorder: https://aur.archlinux.org/packages/simplescreenrecorder/
		# gnome-shell-mousewell: https://github.com/tobiasquinn/gnome-shell-mousewheel-zoom
		# python powerline: https://aur.archlinux.org/packages/python-powerline-git/
		# http://gonzalorau.com.ar/descarga-musica-de-grooveshark-con-groove-dl/
		# audio-recorder
		# https://aur.archlinux.org/packages/au/audio-recorder/audio-recorder.tar.gz
		# gcap is a tool to download youtube subtitles
		yaourt -S groove-dl-git
		# tools to edit subtitles
		yaourt -S subtitleeditor python-pysrt
		yaourt -S font-manager
		sudo yaourt -S corebird-git
		sudo yaourt -S youtube-dl gcap
		sudo pacman -Syu
		sudo pacman -Syu sox
		sudo pacman -Syu xorg-utils pavucontrol
		gnome-{document,music,maps,photos,tweak-tool,extra}
		sudo pacman -S --noconfirm audacious audacity
		sudo pacman -S --noconfirm gedit-plugins pulseaudio-gnome telepathy deja-dup
		sudo pacman -S --noconfirm rhythmbox
		sudo yaourt -S --noconfirm codecs
		sudo pacman -S vlc ffmpegthumbnailer gstreamer0.10-{{bad,good,ugly,base}{,-plugins},ffmpeg}
    sudo pacman -S a52dec faac faad2 flac jasper lame libdca libdv libmad libmpeg2 libtheora libvorbis libxv wavpack x264 xvidcore gstreamer0.10-pluginscman -S a52dec faac faad2 flac jasper lame libdca libdv libmad libmpeg2 libtheora libvorbis libxv wavpack x264 xvidcore gstreamer0.10-plugins
pm i extra/sound-juicer
		rm -rf ~/.thumbnails/fail
		# sucessor do ffmpeg
		# https://aur.archlinux.org/packages/libav-git/
} && multimedia


