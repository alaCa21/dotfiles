#!/usr/bin/env bash
# =================================================
#          CREATED: Sex 18/Abr/2014 hs 12:43
#      LAST CHANGE: Sex 18/Abr/2014 hs 12:43
# THIS SCRIPT AIMS: speak what you asks through parameter
#           AUTHOR: Sérgio Luiz Araújo Silva
#             SITE: http://vivaotux.blogspot.com
#          TWITTER: @voyeg3r
#            SKYPE: sergioaraujosilva
# =================================================

# Crystal .... US English
# Mike ....... US English
# Rich ....... US English
# Lauren ..... US English
# Claire ..... US English
# Rosa ....... Latin Am. Spanish
# Alberto .... Latin Am. Spanish

voice="crystal"

wget -c http://204.178.9.51$(curl --data "voice=$voice&txt=$*&speakButton=SPEAK" "204.178.9.51/tts/cgi-bin/nph-nvttsdemo"|grep ".wav"|cut -d\" -f2)

# removing spaces in file
newname=`sed -e 's, ,_,g' -e 's,$,.mp3,g' <<<$* | tr A-Z a-z`

oldname=`find -maxdepth 1 -cmin -5 -iname "*.wav"`

lame -h -b 192 $oldname $newname

rm -f $oldname

# only playing to you
mpg123 $newname

# this line is used to speed up the anki edition and could be removed
echo "[sound:$newname]" | xclip -selection c

